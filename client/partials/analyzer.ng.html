<div id="analyzerPartial" class="full-size-page container content-section" ng-show="$root.currentUser">
    <!-- Navigation -->
    <nav class="navbar navbar-custom navbar-fixed-top top-nav-collapse" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                    <i class="glyphicon large-inverted glyphicon-menu-hamburger"></i>
                </button>
                <a class="navbar-brand navbar-btn">
                    <img src="img/mainlogo_small.png" alt="matchflow">
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li>
                        <a id="mfDashboard" class="btn navbar-btn" href="/dashboard">Dashboard</a>
                    </li>
                    <li>
                        <a id="mfAnalyzer" class="btn btn-underline navbar-btn">Analyzer</a>
                    </li>
                    <li class="nav-padding">
                        <input type="button" class="btn btn-danger navbar-btn" value="Sign Out" ng-click="logout()" />
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="row">
        <div class="col-lg-12">
            <!-- Display all project data here, as well as any project function buttons -->
            <span class="info-text-title">
                Project:
            </span>
            <span class="info-text">
                {{ currentProject.name}}
            </span>
            <span class="info-text-title">
                League:
            </span>
            <span class="info-text">
                {{ currentProject.league}}
            </span>
            <span class="info-text-title">
                Team:
            </span>
            <span class="info-text">
                {{ currentProject.teams}}
            </span>
            <span class="info-text-title">
                Date:
            </span>
            <span class="info-text">
                {{ currentProject.gameDate}}
            </span>
            <!-- TODO we should show the projects permissions (who we sharing it with) -->
            <span>
                <a ng-click="exportProjectData()"><button class="btn btn-primary">Export Data</button></a>
            </span>
            <span>
                <a ng-click="closeCurrentProject()"><button class="btn btn-danger">Close</button></a>
            </span>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-2">
            <mf-tag-tree tag-data="currentProject.tags" active-dialog-key="activeDialogKey"></mf-tag-tree>
        </div>
        <div class="col-lg-8">
            <ul class="nav nav-tabs">
                <li role="presentation" ng-class="{ active: isDefaultTab('video') }"><a href="#videos-tab" aria-controls="videos-tab" role="tab" data-toggle="tab" ng-if="isPlaybackSupported('video')">Videos</a></li>
                <li role="presentation"><a href="#player-tab" aria-controls="player-tab" role="tab" data-toggle="tab" ng-if="isPlaybackSupported('video')">Player</a></li>
                <li role="presentation" ng-class="{ active: isDefaultTab('livestream') }"><a href="#livestream-tab" aria-controls="livestream-tab" role="tab" data-toggle="tab" ng-if="isPlaybackSupported('livestream')">Live Stream</a></li>
                <li role="presentation" ng-class="{ active: isDefaultTab('data') }"><a href="#data-tab" aria-controls="data-tab" role="tab" data-toggle="tab" ng-if="isPlaybackSupported('data')">Data View</a></li>
                <li role="presentation"><a href="#options-tab" aria-controls="options-tab" role="tab" data-toggle="tab">Options</a></li>
            </ul>
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="videos-tab" ng-if="isPlaybackSupported('video')">
                    <!-- TODO show list of the uploaded videos here -->
                    <!-- TODO show video server space info as well -->

                    <div class="panel panel-primary mf-video-list-container">
                        <div class="panel-heading">
                            Uploaded Videos:
                        </div>
                        <div class="panel-body">
                            <ol class="list-group">
                                <li ng-repeat="video in videoPlayer.videos | orderBy:order" class="list-group-item">
                                    {{ video.order }}: {{ video.name }} [{{ video.readableSize }}]
                                </li>
                            </ol>
                        </div>
                        <div class="panel-footer" style="overflow:auto; clear: both;">
                            <span style="width:200px; float:left;">
                                <h5 style="display:inline;">Space Available</h5>
                                <div class="progress" style="margin-bottom: 0px;">
                                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: {{ videoRepo.percFull }}%">
                                        <!-- text for bar goes here -->
                                        {{ videoRepo.usedSpace }}/{{ videoRepo.totalSpace }}
                                    </div>
                                </div>
                            </span>
                            <span style="float:right;">
                                <a ng-click="uploadVideo()"><button class="btn btn-primary">Upload Video</button></a>
                            </span>
                        </div>
                    </div>


                </div>
                <div role="tabpanel" class="tab-pane" id="player-tab" ng-if="isPlaybackSupported('video')">
                    <mf-video-player player-id="'player'" player-data="videoPlayer"></mf-video-player>
                </div>
                <div role="tabpanel" class="tab-pane" id="livestream-tab" ng-if="isPlaybackSupported('livestream')">
                    <mf-video-player player-id="'live'" player-data="livePlayer"></mf-video-player>
                </div>
                <div role="tabpanel" class="tab-pane" id="data-tab" ng-if="isPlaybackSupported('data')">
                    <!-- CHART AREA -->
                    Chart Area
                    <div>
                        <canvas id="doughnut" class="chart chart-doughnut" data="eventGroupChart.data" labels="eventGroupChart.labels"></canvas>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="options-tab">
                    <!-- project options area -->
                    Options Area
                </div>
            </div>
        </div>
        <div class="col-lg-2">
        </div>
    </div>

    <mf-event-tag-lines player-id="'player'" event-groups="currentProject.eventGroups" video-duration="videoPlayer.videoPlaybackLength" event-tags-to-add="currentProject.tags" play-status="videoPlayer.status"></mf-event-tag-lines>

    <mf-event-tag-area player-id="'player'" event-group-data="currentProject.eventGroups" active-dialog-key="activeDialogKey"></mf-event-tag-area>

    <!-- TODO make modal directive that can be used to open and close the modals -->
    <ng-include src="'client/packages/analyzer/newProjectDialog.ng.html'"></ng-include>
    <ng-include src="'client/packages/analyzer/videoUploadDialog.ng.html'"></ng-include>
    <ng-include src="'client/packages/analyzer/deleteTagConfirmation.ng.html'"></ng-include>
    <ng-include src="'client/packages/analyzer/whatDoYouWantDialog.ng.html'"></ng-include>
    <ng-include src="'client/packages/analyzer/chooseExistingProjectDialog.ng.html'"></ng-include>
    <ng-include src="'client/packages/analyzer/editTagDialog.ng.html'"></ng-include>
    <ng-include src="'client/packages/analyzer/exportTagDataDialog.ng.html'"></ng-include>
    <ng-include src="'client/packages/analyzer/tagDescriptionDialog.ng.html'"></ng-include>

</div>