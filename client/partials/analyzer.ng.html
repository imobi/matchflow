<div id="analyzerPartial" class="full-size-page container content-section" ng-show="$root.currentUser">
    <!-- Navigation -->
    <nav class="navbar navbar-custom navbar-fixed-top top-nav-collapse" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                    <i class="glyphicon large-inverted glyphicon-menu-hamburger"></i>
                </button>
                <a class="navbar-brand navbar-btn">
                    <img src="img/mainlogo_small.png" alt="matchflow">
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li>
                        <a id="mfDashboard" class="btn navbar-btn" href="/dashboard">Dashboard</a>
                    </li>
                    <li>
                        <a id="mfAnalyzer" class="btn btn-underline navbar-btn">Analyzer</a>
                    </li>
                    <li class="nav-padding">
                        <input type="button" class="btn btn-danger navbar-btn" value="Sign Out" ng-click="logout()" />
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- LINKUP SIDEBAR <mf-side-bar side-bar-config="sideBarConfiguration"></mf-side-bar>-->
    
    <div class="row">
        <div class="col-lg-12">
            <span class="info-text-title">
                Project:
            </span>
            <span class="info-text">
                {{ currentProject.name}}
            </span>
            <span class="info-text-title">
                League:
            </span>
            <span class="info-text">
                {{ currentProject.league}}
            </span>
            <span class="info-text-title">
                Team:
            </span>
            <span class="info-text">
                {{ currentProject.teams}}
            </span>
            <span class="info-text-title">
                Date:
            </span>
            <span class="info-text">
                {{ currentProject.gameDate}}
            </span>
            <!-- TODO we should show the projects permissions (who we sharing it with) -->
            <span>
                <a ng-click="closeCurrentProject()"><button class="btn btn-danger">Close</button></a>
            </span>
            <span>
                <a ng-click="uploadVideo()"><button class="btn btn-success">Upload Video</button></a>
            </span>
        </div>
    </div>
    
    <!-- CHARTING EXAMPLE
    <div style="position:fixed; top:100px; right:0px;">
        <canvas id="doughnut" class="chart chart-doughnut" data="eventGroupChart.data" labels="eventGroupChart.labels"></canvas>
    </div-->
    <div class="row">
        <div class="col-lg-2">
            <mf-tag-tree tag-data="groupedTags"></mf-tag-tree>
        </div>
        <div class="col-lg-8">
            <mf-video-player video-player-data="videoPlayer"></mf-video-player>
        </div>
        <div class="col-lg-2">
        </div>
    </div>
    
    <mf-event-tag-lines ng-model="videoPlayer.timer" event-groups="currentProject.eventGroups" video-duration="videoPlayer.videoPlaybackLength" event-tags-to-add="currentProject.tags" play-status="videoPlayer.status"></mf-event-tag-lines>
    
    <mf-event-tag-area event-group-data="currentProject.eventGroups"></mf-event-tag-area>

    <div class="modal fade" id="newProjectDetails" tabindex="-1" role="dialog" aria-labelledby="newProjectDetailsTitle" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="newProjectDetailsTitle">Enter New Project Details</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon">Project Name:</span>
                            <input type="text" ng-model="newProject.name" class="form-control"/>
                        </div>
                        <div class="input-group">
                            <span class="input-group-addon">League:</span>
                            <input type="text" ng-model="newProject.selectedLeague" class="form-control"/>
                        </div>
                        <div class="input-group">
                            <span class="input-group-addon">Teams:</span>
                            <input type="text" ng-model="newProject.selectedTeams" class="form-control"/>
                        </div>
                        <div class="input-group">
                            <span class="input-group-addon">Game Date:</span>
                            <input type="date" ng-model="newProject.selectedGameDate" class="form-control"/>
                        </div>
                        <mf-autocomplete label="'Event Groups:'" search-data="newProject.eventGroupData" ng-model="newProject.selectedEventGroups"></mf-autocomplete>
                        <!-- TODO allow the user to set the project permissions here, 
                             this is necessary for the searching functionality  to work-->
                        <mf-autocomplete label="'Permissions:'" search-field="'type'" key-field="'id'" search-data="newProject.permissionsData" ng-model="newProject.selectedPermissions"></mf-autocomplete>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" ng-click="goBack('newProjectDetails')">Back</button>
                    <button type="button" class="btn btn-primary" ng-click="createNewProject()">Create</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="existingProject" tabindex="-1" role="dialog" aria-labelledby="existingProjectTitle" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="existingProjectTitle">Choose Existing Project</h4>
                </div>
                <div class="modal-body">
                    <mf-project-selector dialog="'existingProject'"></mf-project-selector>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" ng-click="goBack('existingProject')">Back</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="whatDoYouWantToDo" tabindex="-1" role="dialog" aria-labelledby="whatDoYouWantToDoTitle" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="existingProjectTitle">What do you want to do?</h4>
                </div>
                <div class="modal-body">
                    <a ng-click="showCreateNew();"><button class="btn btn-success btn-full">Create New Project</button></a>
                    <a ng-click="showChooseExisting();"><button class="btn btn-success btn-full">Find Existing Project</button></a>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" ng-click="goBack('whatDoYouWantToDo',true)">Back To Dashboard</button>
                    <button type="button" class="btn btn-primary" ng-if="showWDYWTDCancelButton()" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="videoUploadBox" tabindex="-1" role="dialog" aria-labelledby="videoUploadTitle" aria-hidded="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="existingProjectTitle">Upload your video</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4">Video name:</div>
                        <div class="col-md-8"><input type="text" ng-model="videoName"></div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div ngf-drop ngf-select ng-model="files" class="drop-box" 
                                ngf-drag-over-class="dragover" ngf-multiple="true" ngf-allow-dir="false"
                                accept="video/*" 
                                ngf-pattern="'.mp4,.3gp,.mpeg,video/*'">Drop here or click to select file</div>
                            <div ngf-no-file-drop>File Drag/Drop is not supported for this browser</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            Files:
                            <ul>
                                <li ng-repeat="f in files" style="font:smaller">{{f.name}} {{f.$error}} {{f.$errorParam}}</li>
                            </ul>
                        </div>
                    </div>
 
                    <div class="row">  
                        <div class="col-md-12">                          
                            Status:
                            <pre>{{status}}</pre>
                            <div class="alert-primary">{{complete}}</div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" ng-click="goBack('videoUploadBox',true)">Back To Dashboard</button>
                    <button type="button" class="btn btn-primary" ng-if="showWDYWTDCancelButton()" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
</div>